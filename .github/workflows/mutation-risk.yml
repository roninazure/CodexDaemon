name: ğŸ§¬ CodexDaemon Mutation Risk Scan

on:
  workflow_dispatch:
  schedule:
    - cron: "10 4 * * *"  # Every day at 4:10 AM UTC

jobs:
  mutation-risk:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ§¬ Checkout Repo
        uses: actions/checkout@v3

      - name: ğŸ§ª Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: ğŸ”§ Install Dependencies (if needed)
        run: |
          python3 -m venv .venv
          source .venv/bin/activate
          pip install --upgrade pip

      - name: âš™ï¸ Run Mutation Risk Script
        run: |
          source .venv/bin/activate
          python3 .github/scripts/update_mutation_risk.py

      - name: âœ… Commit Updated README
        run: |
          git config --global user.name "CodexDaemon"
          git config --global user.email "codex@daemon.com"
          git add README.md
          git commit -m "ğŸ§¬ Update Mutation Risk Score [auto]" || echo "No changes to commit"
          git push
